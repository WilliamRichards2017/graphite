# build htslib
SET(BCFTOOLS_DIR ${CMAKE_BINARY_DIR}/externals/bcftools CACHE INTERNAL "bcftools project directory")
SET(BCFTOOLS_PROJECT bcftools_project CACHE INTERNAL "bcftools project name")
ExternalProject_Add(${BCFTOOLS_PROJECT}
	DEPENDS ${HTSLIB_PROJECT}
    PREFIX ${BCFTOOLS_DIR}
    GIT_REPOSITORY "https://github.com/samtools/bcftools.git"
    GIT_TAG d00f1d939104bb716434061ededf4faa62afc453
    BUILD_IN_SOURCE 1
	UPDATE_COMMAND ""
    CONFIGURE_COMMAND ""
    BUILD_COMMAND  "make" HTSDIR=${HTSLIB_INCLUDE_DIR}
    INSTALL_COMMAND  ""
    LOG_DOWNLOAD 0
	LOG_UPDATE 0
    LOG_CONFIGURE 0
    LOG_BUILD 0
    LOG_TEST 0
    LOG_INSTALL 0
	CMAKE_CACHE_ARGS
        -DCMAKE_C_COMPILER:STRING=${CMAKE_C_COMPILER}
        -DCMAKE_CXX_COMPILER:STRING=${CMAKE_CXX_COMPILER}
)

ExternalProject_Get_Property(${BCFTOOLS_PROJECT} INSTALL_DIR)
ExternalProject_Get_Property(${BCFTOOLS_PROJECT} SOURCE_DIR)
ExternalProject_Get_Property(${BCFTOOLS_PROJECT} BINARY_DIR)

SET(BCFTOOLS_INCLUDE_DIR ${SOURCE_DIR} CACHE INTERNAL "bcftools include")
SET(BCFTOOLS_LIB ${SOURCE_DIR}/libhts.a CACHE INTERNAL "bcftools Library")

message("include: ${BCFTOOLS_INCLUDE_DIR}")
message("lib: ${BCFTOOLS_LIB}")

